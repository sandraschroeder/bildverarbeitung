\chapter{Implementierung der Algorithmen}
%Sandra Einleitungstext
\Autor{Sandra Schröder}\\\\
Dieses Kapitel beschreibt die Umsetzung der Algorithmen Thinning und Distanztransformation.\\
Bevor Skelettierungsalgorithmen angewendet werden können, muss ein Binärbild des Bildes erzeugt werden, 
das die Kinect liefert. Dafür wurde eine Segmentierung implementiert, die Objekte, die sich vor der
Kinect befinden, weiß markiert. Für die Segmentierung wurde die Tiefeninformation der Kinect genutzt.\\
Die meisten Programme wurden mit der Programmiersprache \emph{Python} umgesetzt. Aus Performanzgründen 
erfolgten einige Umsetzungen in \emph{C++}. 
\section{Wahl der Algorithmen}
%TODO
\section{Die Arbeitsumgebung}
%TODO
\section{Spieler-Segmentierung}
\Autor{Sandra Schröder}\\\\
Listing \ref{lst:player_segmentation} zeigt einen Ausschnitt des Quellcodes für die Spielersegmentierung.\\
Es wird nur anhand der Tiefe segmentiert. Um nicht für jeden einzelnen Pixel die Bedingung zu überprüfen, ob er den Schwellwert für die Segmentierung überschreitet beziehungsweise unterschreitet, wird die effiziente Numpy-Funktion \texttt{logical\_and} benutzt, die global auf dem Bild arbeitet und für das gesamte Bild die Schwellwertbedingung prüft. Für den Schwellwert werden zwei 
Werte definiert, um ein Intervall festzulegen, in dem sich das Objekt befinden darf. 
\lstinputlisting
    [caption={Segmentierung des Spielers}
       \label{lst:player_segmentation},
       captionpos=t,language=python]
 {./listing/player_segmentation.py}
\section{Thinning}  % Würde ich mit anfangen da ich diese Woche fast keine Zeit mehr hab was zu machen (Johannes)
\section{Skelettierung aus der Distanztransformation}
%Sandra
\Autor{Sandra Schröder}\\\\
Die Skelettierung anhand der Distanztransformation läuft folgendermaßen ab:
\begin{itemize}
\item Bestimmen der Distanztransformation des Binärbildes
\item Berechne den Gradientenbetrag auf der Distance Map
\item Differenz zwischen dem Gradientenbild und der Distance Map bilden
\end{itemize}
In Listing \ref*{lst:distanztransformation} ist die Implementierung der Skelettierung zu sehen.
Die Bildverarbeitungsbibliothek \emph{OpenCV} bietet eine Funktion zur Bestimmung der Distance Map.
\lstinputlisting
    [caption={Segmentierung des Spielers}
       \label{lst:distanztransformation},
       captionpos=t,language=python]
 {./listing/distance_skeleton.py} 